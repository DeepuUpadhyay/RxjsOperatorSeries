<div class="container-fluid p-4">
  <!-- Header with Back Button -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="text-primary">
      <i class="fas fa-hourglass-end me-2"></i>AsyncSubject Operator
    </h1>
    <button class="btn btn-outline-primary" (click)="goBackToDashboard()">
      <i class="fas fa-arrow-left me-2"></i>Back to Dashboard
    </button>
  </div>

  <!-- Operator Definition Section -->
  <div class="card mb-4 border-primary">
    <div class="card-header bg-primary text-white">
      <h3 class="mb-0"><i class="fas fa-book me-2"></i>What is AsyncSubject?</h3>
    </div>
    <div class="card-body">
      <div class="alert alert-info">
        <h5><strong>Definition:</strong></h5>
        <p class="mb-2">{{operatorDefinition}}</p>
        <div class="bg-light p-3 rounded mt-3">
          <strong>Key Features:</strong>
          <ul class="mb-0 mt-2">
            <li>‚è≥ <strong>Completion Required:</strong> Only emits when the sequence completes</li>
            <li>üéØ <strong>Last Value Only:</strong> Emits only the final value in the sequence</li>
            <li>üîí <strong>Single Emission:</strong> Perfect for final results and completion states</li>
            <li>üìã <strong>Process Results:</strong> Ideal for long-running operations</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Real-Life Examples Section -->
  <div class="card mb-4 border-success">
    <div class="card-header bg-success text-white">
      <h3 class="mb-0"><i class="fas fa-lightbulb me-2"></i>Real-Life Examples</h3>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-lg-4 mb-3" *ngFor="let example of realLifeExamples">
          <div class="border rounded p-3 h-100">
            <h5 class="text-success">{{example.title}}</h5>
            <p class="text-muted">{{example.description}}</p>
            <pre class="bg-dark text-light p-2 rounded"><code>{{example.code}}</code></pre>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Interactive Demonstrations -->
  <div class="card mb-4 border-warning">
    <div class="card-header bg-warning text-dark">
      <h3 class="mb-0"><i class="fas fa-play me-2"></i>Interactive Demonstrations</h3>
    </div>
    <div class="card-body">
      
      <!-- File Processing Demo -->
      <div class="row mb-4">
        <div class="col-md-6">
          <h5 class="text-warning mb-3">üìÅ File Processing Demo</h5>
          <p class="mb-3">Watch how AsyncSubject waits until completion to emit the final result:</p>
          <button class="btn btn-primary mb-3" (click)="startFileProcessing()">
            <i class="fas fa-file-upload me-2"></i>Start File Processing
          </button>
          <div class="alert alert-info" *ngIf="fileProcessingResult">
            <strong>Final Result:</strong> {{fileProcessingResult}}
          </div>
          <div id="fileContainer" class="border rounded p-3 bg-light" style="min-height: 150px; font-family: monospace; white-space: pre-line;"></div>
        </div>

        <div class="col-md-6">
          <h5 class="text-warning mb-3">üóÑÔ∏è Database Operation Demo</h5>
          <p class="mb-3">See how database transactions emit only the final status:</p>
          <button class="btn btn-success mb-3" (click)="startDatabaseOperation()">
            <i class="fas fa-database me-2"></i>Start Database Operation
          </button>
          <div class="alert alert-success" *ngIf="databaseResult">
            <strong>Final Result:</strong> {{databaseResult}}
          </div>
          <div id="dbContainer" class="border rounded p-3 bg-light" style="min-height: 150px; font-family: monospace; white-space: pre-line;"></div>
        </div>
      </div>

      <!-- Calculation Demo -->
      <div class="row mb-4">
        <div class="col-12">
          <h5 class="text-warning mb-3">üßÆ Long Calculation Demo</h5>
          <p class="mb-3">Observe how calculation progress is tracked but only final result is emitted:</p>
          <button class="btn btn-info mb-3" (click)="startLongCalculation()">
            <i class="fas fa-calculator me-2"></i>Start Long Calculation
          </button>
          <div class="alert alert-warning" *ngIf="calculationResult > 0">
            <strong>Final Calculation Result:</strong> {{calculationResult}}%
          </div>
          <div id="calcContainer" class="border rounded p-3 bg-light" style="min-height: 120px; font-family: monospace; white-space: pre-line;"></div>
        </div>
      </div>

    </div>
  </div>

  <!-- Basic AsyncSubject Example -->
  <div class="card mb-4 border-info">
    <div class="card-header bg-info text-white">
      <h3 class="mb-0"><i class="fas fa-code me-2"></i>Basic AsyncSubject Example</h3>
    </div>
    <div class="card-body">
      <p class="mb-3">Watch how multiple values are sent but only the last one is emitted when completed:</p>
      <div id="asyncContainer" class="border rounded p-3 bg-light" style="min-height: 150px; font-family: monospace; white-space: pre-line;"></div>
    </div>
  </div>

  <!-- Original AsyncSubject Video Example -->
  <div class="card mb-4 border-secondary">
    <div class="card-header bg-secondary text-white">
      <h3 class="mb-0"><i class="fas fa-video me-2"></i>AsyncSubject Video Example</h3>
    </div>
    <div class="card-body">
      <div class="alert alert-info mb-4">
        <strong>Concept:</strong> {{asyncSub}}
      </div>
      
      <div class="row mb-4">
        <div class="col-md-8">
          <h5>Add Video</h5>
          <div class="input-group">
            <input type="text" class="form-control" #userInput placeholder="Enter video name" />
            <button class="btn btn-success" (click)="UserData(userInput.value)">
              <i class="fas fa-plus me-2"></i>Add Video
            </button>
          </div>
          <small class="text-muted">Add multiple videos, then click Complete to see the final result</small>
        </div>
        <div class="col-md-4">
          <button class="btn btn-warning mt-4" (click)="OnComplete()">
            <i class="fas fa-check me-2"></i>Complete AsyncSubject
          </button>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-info text-white">
              <strong><i class="fas fa-user me-2"></i>User (AsyncSubject Subscriber)</strong>
            </div>
            <div class="card-body">
              <div class="alert" [ngClass]="asyncVideo ? 'alert-success' : 'alert-warning'">
                <i class="fas" [ngClass]="asyncVideo ? 'fa-check-circle' : 'fa-clock'"></i>
                <strong>Final Video:</strong> 
                <span *ngIf="asyncVideo; else waitingMessage">{{asyncVideo}}</span>
                <ng-template #waitingMessage>
                  <em>Waiting for completion...</em>
                </ng-template>
              </div>
              <small class="text-muted">
                <i class="fas fa-info-circle me-1"></i>
                AsyncSubject will only show the last video when completed
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Performance Tips -->
  <div class="card border-danger">
    <div class="card-header bg-danger text-white">
      <h3 class="mb-0"><i class="fas fa-exclamation-triangle me-2"></i>Important Notes</h3>
    </div>
    <div class="card-body">
      <div class="alert alert-warning">
        <h5><strong>‚ö†Ô∏è Best Practices:</strong></h5>
        <ul class="mb-0">
          <li><strong>Completion Required:</strong> AsyncSubject must be completed to emit values</li>
          <li><strong>Single Use:</strong> Once completed, AsyncSubject cannot emit more values</li>
          <li><strong>Error Handling:</strong> Errors prevent completion and no values are emitted</li>
          <li><strong>Use Cases:</strong> Perfect for final results, completion status, and one-time operations</li>
        </ul>
      </div>
    </div>
  </div>
</div>
  
